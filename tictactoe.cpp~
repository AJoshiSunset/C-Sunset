using namespace std;

#include <iostream>
#include <cstring>
#include <ctype.h>

struct players {
  char turn = 'X';
  int xwins = 0;
  int owins = 0;
};

bool checkForWin(char board[3][3], char turn) {
  
  for (int a = 0; a < 3; a++) {
    if (board[a][0] == turn && board[a][1] == turn && board[a][2] == turn) {
      return true;
    }
    if (board[0][a] == turn && board[1][a] == turn && board[2][a] == turn) {
      return true;
    }
  }
  if (board[0][0] == turn && board[1][1] == turn && board[2][2] == turn) {
    return true;
  }
  if (board[0][2] == turn && board[1][1] == turn && board[2][0] == turn) {
    return true;
  }
  return false;
}

bool checkForTie(char board[3][3]) {
  for (int a = 0; a < 3; a++) {
    for (int b = 0; b < 3; b++) {
      if (!(board[a][b] == 'X' || board[a][b] == 'O')) {
	return false;
      }
    }
  }
  return true;
}

int main() {

  //char board[3][3] = {'1', '2', '3', '4', '5', '6', '7', '8', '9'};
  int input = 0;

  players tictactoe;

  while (1 == 1)
    {
      char board[3][3] = {'1', '2', '3', '4', '5', '6', '7', '8', '9'};
      input = 0;
  
  while (1 == 1)
    {
      
      cout << "  |  "<< board[0][0] << "  |  " << board[0][1] << "  |  " << board[0][2] << "  |" << endl;
      cout << "  |-----|-----|-----|" << endl;
      cout << "  |  " << board[1][0] << "  |  " << board[1][1] << "  |  " << board[1][2] << "  |" << endl;
      cout << "  |-----|-----|-----|" << endl;
      cout << "  |  " << board[2][0] << "  |  " << board[2][1] << "  |  " << board[2][2] << "  |" << endl;

  cout << tictactoe.turn << "'s turn!" << endl;
  cout << "Input: " << endl;
  cin >> input;
  if (!cin)
    {
      cout << "Invalid input!" << endl;
      cin.clear();
      cin.ignore(1000, '\n');
      continue;
    }
  
  if (input > 9)
    {
      cout << "Invalid input!" << endl;
      continue;
    }
  
  if (board[((input - 1)-(input % 3 - 1))/3][input % 3 - 1] == 'X' || board[((input - 1)-(input % 3 - 1))/3][input % 3 - 1] == 'O') {
    cout << "Ivalid input!" << endl;
    continue;
  }
  
  board[((input - 1)-(input % 3 - 1))/3][input % 3 - 1] = tictactoe.turn;

  if (checkForWin(board, tictactoe.turn) == true) {
    cout << tictactoe.turn << " Wins!" << endl;
    if (tictactoe.turn == 'X') {
      tictactoe.xwins++;
    }
    else {
      tictactoe.owins++;
    }
    break;
  }

  if (checkForTie(board) == true) {
    cout << "Tie!" << endl;
    break;
  }
  
  if (tictactoe.turn == 'X')
    {
      tictactoe.turn = 'O';
    }
  else
    {
      tictactoe.turn = 'X';
    }
  
    }

  cout << "X wins: " << tictactoe.xwins << endl;
  cout << "O wins: " << tictactoe.owins << endl;
 
  char play;
  cout << "Do you want to play again? (y for yes, any key for no)" << endl;
  cin >> play;

  if (play == 'y') {
    continue;
  }
  else {
    break;
  }

    }
  cout << "Thanks for playing!" << endl;
  
  return 0;
}
