using namespace std;

#include <iostream>
#include <cstring>
#include <vector>

struct student {

  char firstname[50];
  char lastname[50];
  int id = 0;
  float gpa = 0.0;
};

void addStudent(vector<student*> & v)
{
  //char input[50];
  //cin.get(input, 50);
  //cin.get();
  int id;
  float gpa;

  student* s = new student();

  cout << "First name:" << endl;
  cin >> s->firstname;
  cout << "Last name:" << endl;
  cin >> s->lastname;
  boolean repeat = true;
  while (repeat == true) {
    repeat = false;
    cout << "ID:" << endl;
    cin >> id;
    if (!cin) {
      cout << "Invalid Input!" << endl;
      cin.clear();
      cin.ignore(1000, '\n');
      repeat = true;
    }
    for (int i = 0; i < v.size(); i++) {
      if (id == v[i]->id) {
	cout << "ID in use!" << endl;
	repeat = true;
      }      
    }
    if (repeat == true) {
      continue;
    }
    else {
      s->id = id;
      break;
    }
  }
  while (1 == 1) {
  cout << "GPA:" << endl;
  cin >> gpa;
  if (!cin) {
    cout << "Invalid Input!" << endl;
    cin.clear();
    cin.ignore(1000,'\n');
    continue;
  }
  if (gpa < 0.0 || gpa > 5.0) {
    cout << "Invalid Input!" << endl;
    cin.clear();
    cin.ignore(1000, '\n');
    continue;
  } 
  s->gpa = gpa;
  break;
  }
  cin.ignore(1000,'\n');

  v.push_back(s);
}

void printStudent(vector<student*> & v) {
  for (int i = 0; i < v.size(); i++) {
    cout << v[i]->firstname << " " << v[i]->lastname << ", " << v[i]->id << ", " << v[i]->gpa << endl;
  }
}

void deleteStudent(vector<student*> & v) {
  int id;
  while (1 == 1) {
  cout << "ID of student to delete: " << endl;
  cin >> id;
  if (!cin) {
    cout << "Invalid Input!" << endl;
    cin.clear();
    cin.ignore(1000, '\n');
    continue;
    }
  break;
  }
  cin.ignore(1000, '\n');
  for (int i = 0; i < v.size(); i++) {
    if (v[i]->id == id) {
      v.erase(v.begin() + i);
    }
  }
}

int main() {

  vector<student*> vec;
  char response[30];
  bool quit = false;
  
  while (1 == 1) {

    while (1 == 1) {

  cout << "'add' to add a student, 'print' to print them, 'del' to delete, 'quit' to exit" << endl;
  cin.get(response, 30);
  cin.get();

  if (strcmp(response, "add") == 0) {
      cout << " " << endl;
      cout << "Adding student..." << endl;
      addStudent(vec);
      cout << " " << endl;
      break;
  } else if (strcmp(response, "print") == 0) {
      cout << " " << endl;
      cout << "Printing students..." << endl;
      printStudent(vec);
      cout << " " << endl;
      break;
  } else if (strcmp(response, "del") == 0) {
      cout << " " << endl;
      cout << "Deleting student..." << endl;
      deleteStudent(vec);
      cout << " " << endl;
      break;
  } else if (strcmp(response, "quit") == 0) {
      cout << "Quitting..." << endl;
      quit = true;
      break;
  } else {
    cout << "Invalid Input!" << endl;
    cin.clear();
    cin.ignore(1000, '\n');
    continue;
  }

    }
    
  if (quit == true) { 
    break;
  }
  
  }
  
  return 0;
}



// make sure the numeric inputs are actually numeric
// make deletstudent id-proof
// make add student id-proof
